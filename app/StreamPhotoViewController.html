<!DOCTYPE html>
<html>
<head>
<style>
    * { margin: 0; padding: 0 }
    body {
        border: 0;
        padding: 0;
        font-family: "Helvetica Neue", Helvetica, sans-serif;
        font-size: 14px;
        width: 320px;
        overflow-x: hidden;
        background: #404040;
        color: white;
    }

    h1 {
        display: block;
        width: 310px;
        font-weight: bold;
        font-size: 18px;
        color: white;
        padding: 10px 5px 8px 5px;
    }

    #photo {
        display: block;
        width: 320px;
        height: 70px;
        background: #444;
        background-image: url({{{ photo.imageURL }}});
        background-position: 0 50%;
        background-size: 100% auto;
    }

    .avatar {
        width: 38px;
        height: 38px;
        float: left;
        margin: 5px;
    }
    .rightcol {
        display: block;
        width: 266px;
        padding-left: 48px;
        margin-bottom: 15px;
    }

    #photometa {
        color: #444;
        display: block;
        width: 320px;
        background: white;
        overflow: hidden;
    }
    
    
    #owner {
        font-weight: bold;
    }

    #tags {
        font-style: italic;
        color: #999;
    }
    
    #map {
        display: block;
        width: 320px; /* size also in StreamPhoto.m */
        height: 70px;
        background: #444;
        background-image: url({{{ photo.mapImageURL }}});
        background-position: 0 50%;
        background-size: 100% auto;
    }

    .timeago { color: #444; }
    .public { color: #279900 }
    .private { color: #990017; }
    .limited { color: #999800; }


    #comments {
        margin-bottom: 10px;
        width: 320px;
        overflow-x: hidden;
    }
    .comment {
        margin-bottom: 15px;
    }
    .comment img {
        max-width: 266px;
    }
    .comment p {
        color: #bbb;
    }
    .comment .author {
        font-weight: bold;
    }
    .comment .date {
        font-style: italic;
    }

    #addcomment a {
        color: white;
        padding-top: 20px;
        padding-bottom: 20px;
    }
    

</style>
</head>
<body>

<h1 id="title">{{photo.title}}</h1>

<a href='noticings-image:'><div id="photo"></div></a>

<div id="photometa">
    <a href="noticings-user:"><img class="avatar" src='{{ photo.avatarURL }}'></a>
    <p id='owner' class="rightcol">by <a href='noticings-user:'>{{photo.ownername}}</a></p>
    {{#photo.html}}
    <p id="description" class="rightcol">{{{photo.html}}}</p>
    {{/photo.html}}

    {{#hasTags}}
    <p id="tags" class="rightcol">
        {{#photo.humanTags}}
        <!-- <a class='tag' href='noticings-tag:{{.}}'> --><span class="tag">#{{.}}</span> <!-- </a> -->
        {{/photo.humanTags}}
    </p>
    {{/hasTags}}

    <p id="meta" class="rightcol">
        Photo is
        {{#isPublic}}<span class="public">public</span>.{{/isPublic}}
        {{#isPrivate}}<span class="private">private</span>.{{/isPrivate}}
        {{#isLimited}}<span class="limited">limited</span>.{{/isLimited}}
        
        Uploaded {{#photo.dateupload}}{{#dateHelper}}{{/dateHelper}}{{/photo.dateupload}}{{^photo.hasLocation}}.{{/photo.hasLocation}}{{#photo.hasLocation}},{{/photo.hasLocation}}
        
        {{#photo.hasLocation}}
        <br>in <a href='noticings-map:'>{{ location }}</a>.
        {{/photo.hasLocation}}
    </p>

</div>

    

{{#photo.hasLocation__}}
<a href='noticings-map:'><div id="map"></div></a>
{{/photo.hasLocation__}}

<div id="comments">

    {{#loadedComments}}
    {{#hasComments}}
        <h1>{{#commentCount}}{{#pluralizeHelper}}comment{{/pluralizeHelper}}{{/commentCount}}:</h1>
        {{#comments}}<div class='comment'>
            <img class="avatar" src="cache://farm{{iconfarm}}.static.flickr.com/{{iconserver}}/buddyicons/{{author}}.jpg">
            <p class="author" class="rightcol">{{authorname}} <span class="date">({{#datecreate}}{{#dateHelper}}{{/dateHelper}}{{/datecreate}})</span></p>
            <p class="body" class="rightcol">{{{_content}}}</p>
        </div>{{/comments}}
        <p id='addcomment' class="rightcol"><a href='noticings-comment:'>Add a comment</a></p>
    {{/hasComments}}

    {{^hasComments}}
        <h1>No comments.</h1>
        <p id='addcomment' class="rightcol"><a href='noticings-comment:'>Add a comment</a></p>
    {{/hasComments}}
    {{/loadedComments}}

    {{#failedComments}}
    <h3>Failed to load comments.</h3>
    {{/failedComments}}

    {{#loadingComments}}
<!--    <h3>Loading comments...</h3> -->
    {{/loadingComments}}


</div>

</body>
</html>